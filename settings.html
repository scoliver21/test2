<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings for Attendance</title>
    <script>
        function setLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((position) => {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;

                    // Automatically set latitude and longitude values without user input
                    localStorage.setItem('latitude', latitude);
                    localStorage.setItem('longitude', longitude);
                    document.getElementById('latitude').value = latitude;
                    document.getElementById('longitude').value = longitude;
                }, (error) => {
                    console.error("Geolocation error: ", error);
                    alert("Unable to retrieve your location.");
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function saveSettings() {
            const radius = document.getElementById('radius').value;
            const classStartTime = document.getElementById('startTime').value;
            const classEndTime = document.getElementById('endTime').value;
            const googleFormLink = document.getElementById('formLink').value;

            // Save settings to localStorage
            localStorage.setItem('radius', radius);
            localStorage.setItem('classStartTime', classStartTime);
            localStorage.setItem('classEndTime', classEndTime);
            localStorage.setItem('googleFormLink', googleFormLink);

            alert("Settings saved!");
        }
    </script>
</head>
<body>
    <h1>Set Class Attendance Settings</h1>
    
    <button onclick="setLocation()">Set Current Location</button><br>
    <label for="latitude">Latitude:</label>
    <input type="text" id="latitude" readonly required><br>
    
    <label for="longitude">Longitude:</label>
    <input type="text" id="longitude" readonly required><br>
    
    <label for="radius">Radius (in kilometers):</label>
    <input type="number" id="radius" step="0.01" min="0.01" required><br>
    
    <label for="startTime">Class Start Time:</label>
    <input type="time" id="startTime" required><br>
    
    <label for="endTime">Class End Time:</label>
    <input type="time" id="endTime" required><br>
    
    <label for="formLink">Google Form Link:</label>
    <input type="url" id="formLink" required><br>
    
    <button onclick="saveSettings()">Save Settings</button>
</body>
</html>
